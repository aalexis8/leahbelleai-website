---
import Layout from "@/layouts/Layout.astro";
import Header from "@/components/Header.astro";
import Footer from "@/components/Footer.astro";

const contactInfo = [
  {
    title: "Email",
    value: "support@leahbelleai.com",
    icon: "‚úâÔ∏è",
  },
  {
    title: "Phone",
    value: "+1 (718) 790-6479",
    icon: "üìû",
  },
  {
    title: "Location",
    value: "Columbus, OH",
    icon: "üìç",
  },
];
---

<Layout
  title="Contact Us"
  description="Get in touch with LeahBelle AI Consulting. Let's discuss how we can help transform your data strategy."
>
  <Header />

  <main class="flex-grow">
    <!-- Hero -->
    <section class="section bg-gradient-to-br from-gray-50 to-white">
      <div class="container text-center">
        <h1 class="mb-6">Get in <span class="gradient-text">Touch</span></h1>
        <p class="text-xl text-gray-600 max-w-2xl mx-auto">
          Have a project in mind? We'd love to hear from you. Send us a message
          and we'll get back to you as soon as possible.
        </p>
      </div>
    </section>

    <!-- Contact Form & Info -->
    <section class="section bg-white">
      <div class="container">
        <div class="grid lg:grid-cols-2 gap-12">
          <!-- Form -->
          <div class="card">
            <h2 class="text-2xl mb-6">Send Us a Message</h2>

            <!-- Success Message -->
            <div
              id="success-message"
              class="hidden mb-6 p-4 bg-green-100 border border-green-400 text-green-700 rounded-lg"
            >
              <p class="font-medium">Thank you for your message!</p>
              <p class="text-sm">We'll get back to you as soon as possible.</p>
            </div>

            <!-- Error Message -->
            <div
              id="error-message"
              class="hidden mb-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg"
            >
              <p class="font-medium">Something went wrong.</p>
              <p class="text-sm">Please try again or email us directly.</p>
            </div>

            <form
              id="contact-form"
              action="https://api.web3forms.com/submit"
              method="POST"
              class="space-y-6"
            >
              <!-- Web3Forms Access Key - Replace with your key from https://web3forms.com -->
              <input
                type="hidden"
                name="access_key"
                value="e9a1cff5-5fec-4f6e-a638-a837ea4f0c70"
              />

              <!-- Optional: Customize email subject -->
              <input
                type="hidden"
                name="subject"
                value="New Contact Form Submission - LeahBelle AI"
              />

              <!-- Optional: Redirect after submission (or use AJAX) -->
              <input type="hidden" name="redirect" value="" />

              <!-- Honeypot Spam Protection -->
              <input
                type="checkbox"
                name="botcheck"
                class="hidden"
                style="display: none;"
              />

              <div class="grid md:grid-cols-2 gap-6">
                <div>
                  <label
                    for="firstName"
                    class="block text-sm font-medium text-gray-700 mb-2"
                  >
                    First Name
                  </label>
                  <input
                    type="text"
                    id="firstName"
                    name="firstName"
                    required
                    class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-purple focus:border-transparent outline-none transition"
                  />
                </div>
                <div>
                  <label
                    for="lastName"
                    class="block text-sm font-medium text-gray-700 mb-2"
                  >
                    Last Name
                  </label>
                  <input
                    type="text"
                    id="lastName"
                    name="lastName"
                    required
                    class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-purple focus:border-transparent outline-none transition"
                  />
                </div>
              </div>
              <div>
                <label
                  for="email"
                  class="block text-sm font-medium text-gray-700 mb-2"
                >
                  Email
                </label>
                <input
                  type="email"
                  id="email"
                  name="email"
                  required
                  class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-purple focus:border-transparent outline-none transition"
                />
              </div>
              <div>
                <label
                  for="company"
                  class="block text-sm font-medium text-gray-700 mb-2"
                >
                  Company
                </label>
                <input
                  type="text"
                  id="company"
                  name="company"
                  class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-purple focus:border-transparent outline-none transition"
                />
              </div>
              <div>
                <label
                  for="service"
                  class="block text-sm font-medium text-gray-700 mb-2"
                >
                  Service of Interest
                </label>
                <select
                  id="service"
                  name="service"
                  class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-purple focus:border-transparent outline-none transition"
                >
                  <option value="">Select a service...</option>
                  <option value="ETL & Data Migration"
                    >ETL & Data Migration</option
                  >
                  <option value="Data Modeling">Data Modeling</option>
                  <option value="Data Integration">Data Integration</option>
                  <option value="Other">Other</option>
                </select>
              </div>
              <div>
                <label
                  for="message"
                  class="block text-sm font-medium text-gray-700 mb-2"
                >
                  Message
                </label>
                <textarea
                  id="message"
                  name="message"
                  rows="4"
                  required
                  class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-purple focus:border-transparent outline-none transition resize-none"
                ></textarea>
              </div>
              <button
                type="submit"
                id="submit-btn"
                class="btn btn-primary w-full"
              >
                <span id="btn-text">Send Message</span>
                <span id="btn-loading" class="hidden">Sending...</span>
              </button>
            </form>
          </div>

          <!-- Contact Info -->
          <div>
            <h2 class="text-2xl mb-6">Contact Information</h2>
            <p class="text-gray-600 mb-8">
              Prefer to reach out directly? Here's how you can contact us.
            </p>

            <div class="space-y-6">
              {
                contactInfo.map(info => (
                  <div class="flex items-start">
                    <div class="text-3xl mr-4">{info.icon}</div>
                    <div>
                      <h4 class="font-semibold mb-1">{info.title}</h4>
                      <p class="text-gray-600">{info.value}</p>
                    </div>
                  </div>
                ))
              }
            </div>

            <div class="mt-12 p-6 bg-gray-50 rounded-xl">
              <h4 class="font-semibold mb-2">Office Hours</h4>
              <p class="text-gray-600">
                Monday - Friday: 9:00 AM - 6:00 PM (PST)<br />
                Saturday - Sunday: Closed
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <Footer />
</Layout>

<script>
  const form = document.getElementById("contact-form") as HTMLFormElement;
  const submitBtn = document.getElementById("submit-btn");
  const btnText = document.getElementById("btn-text");
  const btnLoading = document.getElementById("btn-loading");
  const successMessage = document.getElementById("success-message");
  const errorMessage = document.getElementById("error-message");

  form?.addEventListener("submit", async e => {
    e.preventDefault();

    // Hide any previous messages
    successMessage?.classList.add("hidden");
    errorMessage?.classList.add("hidden");

    // Show loading state
    btnText?.classList.add("hidden");
    btnLoading?.classList.remove("hidden");
    if (submitBtn) (submitBtn as HTMLButtonElement).disabled = true;

    try {
      const formData = new FormData(form);
      const response = await fetch(form.action, {
        method: "POST",
        body: formData,
        headers: {
          Accept: "application/json",
        },
      });

      if (response.ok) {
        successMessage?.classList.remove("hidden");
        form.reset();
      } else {
        throw new Error("Form submission failed");
      }
    } catch (error) {
      errorMessage?.classList.remove("hidden");
    } finally {
      // Reset button state
      btnText?.classList.remove("hidden");
      btnLoading?.classList.add("hidden");
      if (submitBtn) (submitBtn as HTMLButtonElement).disabled = false;
    }
  });
</script>
